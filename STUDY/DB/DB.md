# DB


# ２相コミットメント
- 一相コミットメントでは，あるトランザクション処理が発生して，複数のデータベースが更新されたときに片方がエラーを起こしてしまうと，更新処理に矛盾が起きてトランザクション処理の原則（ACID特性）である「原子性」と「一貫性」を満たさなくなってしまう。

![](../../PICTURE/DB/commit1.png)

- ２相コミットメントでは「確定することもできるし」「元に戻すこともできる」状態であるセキュア状態を作り出すことで，片方に異常が起こった場合にロールバックを可能にする。

![](../../PICTURE/DB/commit2.png)

![](../../PICTURE/DB/2Commit_01.png)
![](../../PICTURE/DB/2Commit_02.png)
![](../../PICTURE/DB/2Commit_03.png)
![](../../PICTURE/DB/2Commit_04.png)


# 正規化

第1正規化
繰り返し項目をなくす
第2正規化
主キーの一部によって一意に決まる属性を別表に移す
第3正規化
主キー以外の属性によって一意に決まる属性を別表に移す




CASCADE
正しい。CASCADEは、参照される側の行が削除・更新された場合、それを参照する側の行も同時に削除・更新する指定です。
INTERSECT
INTERSECTは、複数の表から両方に共通する行を抽出する集合演算を行うSQL文です。積集合を求めるのに使います。
RESTRICT
RESTRICTは、参照制約性を損なう削除や更新処理の要求に対して、データ更新または削除を禁止する指定です。
UNIQUE
UNIQUEは、データベースにデータを追加したり更新する際に、列や列のグループに格納される値が表内のすべての行で一意となるように制限する指定です。




べき等(Idempotent)とは、コンピュータサイエンスの世界で使われる言葉で、ある操作を1回実行しても複数回実行しても結果が同じになる性質です。主要なデータ操作SQL文のうち、SELECTと障害回復時のUNDO・REDOはべき等、INSERT・UPDATE・DELETEはべき等ではありません。
同一の操作を複数回実行した結果と，一回しか実行しなかった結果が同一になる操作
正しい。べき等な操作の説明です。
トランザクション内の全ての処理が成功したか，何も実行されなかったかのいずれかの結果にしかならない操作
原子性の説明です。
一つのノードへのレコードの挿入処理を，他のノードでも実行する操作
レプリケーションの説明です。
複数のトランザクションを同時に実行した結果と，順番に実行した結果が同一になる操作
直列化可能または一貫性の説明です。