# 電子署名
- 電子署名とは、文書やメッセージなどのデータの真正性を証明するために付加される、短い暗号データ。作成者を証明し、改竄やすり替えが行われていないことを保証する。欧米で紙の文書に記されるサイン（signature）に似た働きをするためこのように呼ばれる。

- 公開鍵暗号の原理（必ずしも公開鍵暗号そのものとは限らない）と暗号学的ハッシュ関数を組み合わせた仕組みで、メッセージの送信者は本人しか知らない秘密鍵と本文を元に一定の手順で算出した固定長の暗号データをメッセージに添付し、相手方に送る。

- 受信者が署名を検証するには送信者の公開鍵が必要だが、インターネットなど信頼できない経路で伝送すると攻撃者によるすり替えの危険があるため、公開鍵データに送信者と受信者の双方が信用する第三者のデジタル署名を添付するという手法が考案された。これをデジタル証明書（公開鍵証明書）と呼び、信頼できる第三者を認証局（CA：Certificate Authority）という。


## ルート証明書
## SSL/TLSサーバ証明書
## DV証明書
## EV証明書
## クライアント証明書

## コードサイニング証明書
- ソフトウェアのディジタル署名の検証に使用する。
- コンピュータプログラムを配布・販売する際に、利用者が発行元の確認や改竄検知ができるように付与されるデジタル署名の証明書。これを用いて発行元がプログラムにデジタル署名を施すことをコード署名（code signing）という。

- ディジタル署名を検証するには発行者が署名に用いた秘密鍵と対になる公開鍵を安全に入手する必要があるため、その配送手段として認証局（CA：Certificate Authority）などの第三者が発行したデジタル証明書が用いられる。このようなコード署名に用いられる証明書のことをコードサイニング証明書あるいはコード署名証明書という。

- 署名と検証の仕組み
    - 署名（配布側）の流れ
        1. コードサイニング証明書取得
        1. 配布するコードからハッシュ値※を生成
        1. 配布元によるハッシュ値の暗号化（＝デジタル署名）
        1. 配布するコード、デジタル署名されたハッシュ値、配布元のコード署名証明書を含む配布パッケージの作成
        1. 配布

    ![](../../PICTURE/cryptograph/signature/codesign_1.png)


    - 検証（受信側）の流れ
        1. 受信
        1. 証明書の有効性を検証
        1. 証明書から配布元の公開鍵を取得
        1. 配布元の秘密鍵で暗号化（デジタル署名）されたハッシュ値情報を復号
        1. 受け取ったコードからハッシュ値を生成
        1. 受け取ったコードから生成したハッシュ値と復号されたハッシュ値を突合し、同一であれば改ざんされていない

    ![](../../PICTURE/cryptograph/signature/codesign_2.png)


## S/MIME証明書