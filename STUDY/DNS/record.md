# DNSレコード

# DNSレコード基本情報
- DNSレコードの設定において必須な情報
- 以下はサービスプロバイダ側でデフォルトで値が設定されることが殆どでにユーザー側で編集する機会の少ないDNSレコード

## SOA(Start of Authority)レコード
- ドメインのゾーン情報を設定するために使用
- 管理用の設定情報。
- 以下の設定を行う。
    - ドメインのDNSサーバ名(mname)
    - ドメイン管理者のメールアドレス(rname)
    - ゾーンファイルのバージョンを表すシリアル番号(serial)
    - ゾーン情報の更新間隔(refresh)
    - refresh失敗時の再試行間隔(retry)
    - ゾーン情報の有効期限(expire)、TTL(minimum)

## NS(Name Server)レコード
- 当該ゾーンや移譲した下位ドメインの権威DNSサーバの情報
- DNS情報を参照するサーバーを指定する。
    - 一般的には複数のNSレコードを指定する。



# Webサイトやメールでの使用に必要なDNSレコード
## A(Address)レコード
- ドメインのサービスをホストするサーバーのIPアドレスを指定する。

## AAAA(Quad A)レコード
- IPv6のIPアドレスをAレコードと同様に設定する場合に使用する。

## CNAME(Canonical Name)レコード
- wwwやmailなどのサブドメイン名をホスト名のエイリアスとして指定する場合に使用する。
    - ホスト名の別名


## MX(Mail Exchange)レコード
- メールの送信に使用するサーバーのレコードを指定する。
    - 「～@example.jp」宛のメールは「mail.example.jp」へ送信せよ、という意味

```
example.jp. IN MX 10 mail.example.jp.
```


- 一般的にMXレコードでは複数のサーバーを優先順位を指定した上で設定し、最も優先順位の高いサーバーと通信ができなかった場合は、次に優先順位の高いサーバーに通信を行う。





## TXTレコード
- TXTレコードとは、DNSで定義されるそのドメインについての情報の種類の一つで、あるホスト名の付加情報を自由に定義するためのもの。DNSの仕様上は特定の用途や書式は定められておらず、管理者が任意の文字データを設定できる。

- DNSを拡張してプロトコルや仕組みを実装する際、必要な情報の定義などに使われることが多い。例えば、自らがあるドメインを所有していることを証明するため、相手方の発行したコードを自ドメインのTXTレコードに記載して確認させる手法がある。これを「TXTレコード認証」と呼ぶ。

- また、SPFやDKIMなどのメール送信元認証・確認などの技術でも、管理者がTXTレコードに決められた書式でデータを載せておくことで当該ドメインの設定や情報を外部に提供する。

```
IN TXT "v=spf1 ip4:198.51.100.1 ~all"
→『198.51.100.1』から送られたメールは真っ当に送られたメールだよ、というコメント
```



## TTL
- TTL(Time to Live)は、それぞれのDNSレコードに対してキャッシュDNSサーバーにおいてそのレコード情報を保持する期間の値を設定する。
- 例えばこの値を86400に設定すると、24時間そのレコード情報を保持することとなり、新しくレコードの設定を更新した場合は、その更新内容が各キャッシュDNSサーバーに行き渡るまで最大で24時間を要することになる。

# そのほかのDNSレコード
## PTR(Pointer)レコード
- IPアドレスからホスト名を参照する場合の逆引き(reverse lookup)に使用する。

## SRV(Service)レコード
- 特定のサービスをホストしているコンピューターや、そのポート番号を指定する場合に使用する。
- SIPやXMPPなどのプロトコルを使用する場合には必須のレコード
- レコードの優先度や重み付けを指定することができる。