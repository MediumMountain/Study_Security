# メール送信の仕組み
エンベロープヘッダとメールヘッダ



## MTA (Mail Transfer Agent)
- メールの中継（配送）の機能
- ネットワーク上でメールを転送・配送するソフトウェア。いわゆるメールサーバの中心的な役割の一つで、利用者がメールソフト（MUA：Mail User Agent）などで送信したメールを受け取り、宛先に基づいて振り分け、相手方のMTAなどに転送する。


## MUA (Mail User Agent)
- パソコン、携帯、スマホなどのメールソフト、アプリの機能

## MDA (Mail Transfer Agent)
- メールサーバ―にあるメールボックス（メールスプール）への保存の機能

## MSA (Mail Submission Agent)
- メールサーバ―に含まれるメールの発信受付、ユーザ認証の機能

## MRA (Mail Transfer Agent)
- ユーザ認証、メールボックス（メールスプール）からのメールの取り出しの機能

![](../../PICTURE\Mail\mail-image-01.png)  
![](../../PICTURE\Mail\mail-image-02.png)  




# OP25B (Outbound Port 25 Blocking)
    OP25Bとは、ネットワークの境界にあるルータなどの機器で、ネットワーク内から外部のコンピュータのTCPポート25番への通信を禁止すること。インターネットサービスプロバイダ（ISP）などが会員のパソコンからスパムメールが送信されるのをブロックするために行っている。

    25番ポートはメールの送信に使うSMTPが利用するポートで、これを塞ぐことでメールの送信ができなくなる。会員がプロバイダのメールサーバでスパムメールを送信しようとする場合は、これを個別に遮断したり会員を退会処分にしたりすることができるが、外部のメールサーバを利用されるとこうした措置を取ることができない。

    そこで、ネットワークの境界で外部のSMTPサーバへの通信を遮断することにより、会員のコンピュータが外部のメールサーバを利用してスパムメールなどを送ることを根こそぎ防ぐことができる。あくまで外部サーバへの通信を遮断するだけで自ネットワーク内にあるメールサーバへの通信は可能なため、プロバイダのメールサーバを利用した通常のメールの送受信は影響を受けない。


## 25番ポート
- インターネットなどの通信でアプリケーションの種類や通信規約（プロトコル）の識別に用いられるポート番号の一つ。通常はTCPの25番を電子メールの送信・配達（SMTP）のために用いる。

## IP25B (Inbound Port 25 Blocking)
- ネットワークの境界にあるルータなどの機器で、外部ネットワークで動的に割り当てられたIPアドレスなどからのTCPポート25番への着信を禁止すること。インターネットサービスプロバイダ（ISP）などが、不審な送信元から自社会員へのメール送達を阻止するために行う。